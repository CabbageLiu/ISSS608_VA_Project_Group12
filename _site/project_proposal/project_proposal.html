<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Lui Chih Yuan, David Chiam, Enrico Sebastian">
<meta name="dcterms.date" content="2025-06-08">

<title>Project Proposal – ISSS608 Visual Analytics Project</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-ddd961a2510921635943dfbbd19534c4.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">ISSS608 Visual Analytics Project</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-menu" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Menu</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-menu">    
        <li>
    <a class="dropdown-item" href="../project_proposal/project_proposal.html">
 <span class="dropdown-text">Project Proposal</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../main_project_qmd/main_project_qmd/main.html">
 <span class="dropdown-text">Report Draft (Main)</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-meeting-minutes" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Meeting Minutes</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-meeting-minutes">    
        <li>
    <a class="dropdown-item" href="../Mtg_Minutes/Meeting01.html">
 <span class="dropdown-text">Meeting Minutes 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Mtg_Minutes/Meeting02.html">
 <span class="dropdown-text">Meeting Minutes 2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Mtg_Minutes/Meeting03.html">
 <span class="dropdown-text">Meeting Minutes 3</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#take-home-exercise-3-prototype-module-designing-for-vast-challenge-2025-mc3" id="toc-take-home-exercise-3-prototype-module-designing-for-vast-challenge-2025-mc3" class="nav-link active" data-scroll-target="#take-home-exercise-3-prototype-module-designing-for-vast-challenge-2025-mc3">Take-home Exercise 3: Prototype Module Designing for Vast Challenge 2025 MC3</a>
  <ul class="collapse">
  <li><a href="#the-task" id="toc-the-task" class="nav-link" data-scroll-target="#the-task"><strong>The Task</strong></a></li>
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction"><strong>1. Introduction</strong></a></li>
  <li><a href="#data-preparation" id="toc-data-preparation" class="nav-link" data-scroll-target="#data-preparation"><strong>2. Data Preparation</strong></a>
  <ul class="collapse">
  <li><a href="#pre-processing-steps" id="toc-pre-processing-steps" class="nav-link" data-scroll-target="#pre-processing-steps"><strong>Pre-processing Steps:</strong></a></li>
  </ul></li>
  <li><a href="#analytical-and-visualisation-techniques" id="toc-analytical-and-visualisation-techniques" class="nav-link" data-scroll-target="#analytical-and-visualisation-techniques">3. Analytical and Visualisation Techniques</a>
  <ul class="collapse">
  <li><a href="#algorithms-used" id="toc-algorithms-used" class="nav-link" data-scroll-target="#algorithms-used">Algorithms Used:</a></li>
  <li><a href="#visualisation-approach" id="toc-visualisation-approach" class="nav-link" data-scroll-target="#visualisation-approach">Visualisation Approach:</a></li>
  </ul></li>
  <li><a href="#ui-design-prototyping-storyboarding" id="toc-ui-design-prototyping-storyboarding" class="nav-link" data-scroll-target="#ui-design-prototyping-storyboarding">4. UI Design (Prototyping &amp; Storyboarding)</a>
  <ul class="collapse">
  <li><a href="#prototyping-strategy" id="toc-prototyping-strategy" class="nav-link" data-scroll-target="#prototyping-strategy">Prototyping Strategy</a></li>
  <li><a href="#storyboarding-process" id="toc-storyboarding-process" class="nav-link" data-scroll-target="#storyboarding-process">Storyboarding Process</a></li>
  <li><a href="#main-landing-page-mock-ups-and-dashboard-style" id="toc-main-landing-page-mock-ups-and-dashboard-style" class="nav-link" data-scroll-target="#main-landing-page-mock-ups-and-dashboard-style">Main Landing Page Mock-ups and Dashboard Style</a></li>
  <li><a href="#planned-layout" id="toc-planned-layout" class="nav-link" data-scroll-target="#planned-layout">Planned Layout</a></li>
  <li><a href="#ui-component-mapping" id="toc-ui-component-mapping" class="nav-link" data-scroll-target="#ui-component-mapping">UI Component Mapping</a></li>
  <li><a href="#interactive-tabulated-results" id="toc-interactive-tabulated-results" class="nav-link" data-scroll-target="#interactive-tabulated-results">Interactive Tabulated Results</a></li>
  </ul></li>
  <li><a href="#parameters-and-outputs" id="toc-parameters-and-outputs" class="nav-link" data-scroll-target="#parameters-and-outputs">5. Parameters and Outputs</a>
  <ul class="collapse">
  <li><a href="#user-inputs" id="toc-user-inputs" class="nav-link" data-scroll-target="#user-inputs">User Inputs:</a></li>
  <li><a href="#application-outputs" id="toc-application-outputs" class="nav-link" data-scroll-target="#application-outputs">Application Outputs:</a></li>
  <li><a href="#interactivity-expansion-ideas" id="toc-interactivity-expansion-ideas" class="nav-link" data-scroll-target="#interactivity-expansion-ideas">Interactivity Expansion Ideas:</a></li>
  <li><a href="#user-inputs-1" id="toc-user-inputs-1" class="nav-link" data-scroll-target="#user-inputs-1">User Inputs:</a></li>
  <li><a href="#application-outputs-1" id="toc-application-outputs-1" class="nav-link" data-scroll-target="#application-outputs-1">Application Outputs:</a></li>
  </ul></li>
  <li><a href="#prototype-code-snippets" id="toc-prototype-code-snippets" class="nav-link" data-scroll-target="#prototype-code-snippets">6. Prototype Code Snippets</a></li>
  <li><a href="#reflections-and-next-steps" id="toc-reflections-and-next-steps" class="nav-link" data-scroll-target="#reflections-and-next-steps">7. Reflections and Next Steps</a>
  <ul class="collapse">
  <li><a href="#proposed-next-steps" id="toc-proposed-next-steps" class="nav-link" data-scroll-target="#proposed-next-steps">Proposed Next Steps</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Project Proposal</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Lui Chih Yuan, David Chiam, Enrico Sebastian </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">June 8, 2025</p>
    </div>
  </div>
  
    <div>
    <div class="quarto-title-meta-heading">Modified</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">June 21, 2025</p>
    </div>
  </div>
    
  </div>
  


</header>


<section id="take-home-exercise-3-prototype-module-designing-for-vast-challenge-2025-mc3" class="level1">
<h1>Take-home Exercise 3: Prototype Module Designing for Vast Challenge 2025 MC3</h1>
<section id="the-task" class="level2">
<h2 class="anchored" data-anchor-id="the-task"><strong>The Task</strong></h2>
<p>In this take-home exercise, you are required to select one of the module of your proposed Shiny application and complete the following tasks:</p>
<ul>
<li>To evaluate and determine the necessary R packages needed for your Shiny application are supported in R CRAN,</li>
<li>To prepare and test the specific R codes can be run and returned the correct output as expected,</li>
<li>To determine the parameters and outputs that will be exposed on the Shiny applications, and</li>
<li>To select the appropriate Shiny UI components for exposing the parameters determine above.</li>
</ul>
<hr>
</section>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction"><strong>1. Introduction</strong></h2>
<p>This prototype module is part of a larger visual analytics application for Mini-Challenge 3 (VAST Challenge 2025). It supports investigative journalist <strong>Clepper Jessen</strong> in uncovering hidden relationships and pseudonymous communication patterns within the radio transcript dataset of Oceanus.</p>
<p>The goal of this prototype is to storyboard and test a modular component that will eventually be integrated into the full Shiny application. The focus is on <strong>community detection</strong> and <strong>interactive pseudonym analysis</strong>, providing users with the ability to dynamically explore clusters of entities based on radio communication activity.</p>
<p>This document outlines the prototyping process, from data wrangling and method selection, to interactive interface design using Shiny components. The storyboard describes how different visual and interactive elements will work together to support investigative insights.</p>
</section>
<section id="data-preparation" class="level2">
<h2 class="anchored" data-anchor-id="data-preparation"><strong>2. Data Preparation</strong></h2>
<p>The source data is a knowledge graph in JSON format (<code>MC3_graph.json</code>) provided in the VAST Challenge 2025 Mini-Challenge 3. It consists of two primary components:</p>
<ul>
<li><strong>Nodes</strong>: Representing entities such as persons, vessels, places, and roles, each with metadata such as labels and types.</li>
<li><strong>Edges</strong>: Representing communications between nodes with attributes such as sender, receiver, channel, date-time, and message weight.</li>
</ul>
<section id="pre-processing-steps" class="level3">
<h3 class="anchored" data-anchor-id="pre-processing-steps"><strong>Pre-processing Steps:</strong></h3>
<p>The following R packages were used for data wrangling:</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidygraph)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggraph)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(jsonlite)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The steps to prepare the data are as follows:</p>
<p><strong>Step 1: Load and Parse the JSON File</strong></p>
<pre><code># Load the knowledge graph json_graph &lt;- jsonlite::read_json("data/MC3_graph.json")</code></pre>
<p><strong>Step 2: Extract and Structure Nodes and Edges</strong></p>
<pre><code># Convert to tibble format nodes_tbl &lt;- as_tibble(json_graph$nodes) edges_tbl &lt;- as_tibble(json_graph$links)  # Rename and structure columns for compatibility nodes_tbl &lt;- nodes_tbl %&gt;% rename(id = id, label = name, type = entity_type) edges_tbl &lt;- edges_tbl %&gt;% rename(from = source, to = target)</code></pre>
<p><strong>Step 3: Convert to a Tidygraph Object</strong></p>
<pre><code>graph_data &lt;- tbl_graph(nodes = nodes_tbl, edges = edges_tbl, directed = TRUE)</code></pre>
<p><strong>Step 4: Clean and Enrich the Graph</strong></p>
<pre><code># Filter out edges with low weights or irrelevant connections (e.g., self-loops) graph_data &lt;- graph_data %&gt;%    activate(edges) %&gt;%    filter(!is.na(from), !is.na(to)) %&gt;%    filter(weight &gt; 1) %&gt;%    activate(nodes) %&gt;%    mutate(degree = centrality_degree())</code></pre>
<p><strong>Step 5: Verify Graph Summary</strong></p>
<pre><code>summary(graph_data)</code></pre>
<p>These steps ensure that the data is converted into a tidy, filterable, and graph-compatible structure for community detection and interactive visualisation.</p>
<p>The core data transformation principles applied include:</p>
<ul>
<li><strong>Parsed JSON using tidygraph and igraph</strong> to build a directed graph structure from node-link format.</li>
<li><strong>Mapped entity metadata</strong> to classify nodes into roles such as Person, Vessel, and Place.</li>
<li><strong>Filtered and simplified the graph</strong>, including removal of self-loops and edges with insignificant weights to retain only meaningful relationships.</li>
<li><strong>Enriched nodes with centrality metrics</strong>, particularly degree centrality, which is used for sizing and filtering nodes during visualisation.</li>
</ul>
</section>
</section>
<section id="analytical-and-visualisation-techniques" class="level2">
<h2 class="anchored" data-anchor-id="analytical-and-visualisation-techniques">3. Analytical and Visualisation Techniques</h2>
<p>This module employs a dual-pronged analytical strategy that combines community detection algorithms with exploratory network visualization. These techniques allow the investigator to detect tightly linked communication subgroups, potentially exposing pseudonym clusters or coordinated behavior among vessels and individuals.</p>
<section id="algorithms-used" class="level3">
<h3 class="anchored" data-anchor-id="algorithms-used">Algorithms Used:</h3>
<p>We adopted two widely recognized algorithms for graph community detection:</p>
<ul>
<li><strong>Louvain Community Detection</strong>: An unsupervised modularity-based approach that optimizes the partitioning of the graph into clusters. It is computationally efficient and ideal for detecting broad clusters in large-scale networks.</li>
<li><strong>Walktrap Community Detection</strong>: Uses short random walks to find densely connected subgraphs. It is suitable for identifying smaller, more cohesive communities and capturing subtle relational dynamics.</li>
</ul>
<p>Both algorithms produce numeric cluster IDs for each node, which are then used for node coloring and group-based filtering in the visual layer.</p>
</section>
<section id="visualisation-approach" class="level3">
<h3 class="anchored" data-anchor-id="visualisation-approach">Visualisation Approach:</h3>
<p>Visualisation is a central element in this prototype, serving both as an exploratory and explanatory tool. Two main techniques were employed:</p>
<ul>
<li><strong>Static Graphs using <code>ggraph</code></strong>: These are helpful during the analytical phase for layout calibration, edge density verification, and debugging of network transformations.</li>
<li><strong>Interactive Graphs using <code>visNetwork</code></strong>: These are deployed in the Shiny UI to support user-driven exploration. <code>visNetwork</code> provides pan, zoom, hover, and click functionality, which enhances pattern recognition and contextual analysis.</li>
</ul>
<p>Color schemes were intentionally chosen to reflect community membership (via cluster ID), and node sizing was mapped to degree centrality to emphasize influence or activity within the graph.</p>
<p>Additional enhancements include:</p>
<ul>
<li>Hover tooltips to display entity type and communication degree</li>
<li>Legend to distinguish nodes by category (Person, Vessel, Place)</li>
<li>Reactive filtering to isolate specific patterns of interest</li>
<li><strong>Static Graphs</strong>: Using <code>ggraph</code> for initial exploration.</li>
<li><strong>Interactive Network</strong>: Leveraging <code>visNetwork</code> for drilldown, tooltips, and filtering.</li>
</ul>
</section>
</section>
<section id="ui-design-prototyping-storyboarding" class="level2">
<h2 class="anchored" data-anchor-id="ui-design-prototyping-storyboarding">4. UI Design (Prototyping &amp; Storyboarding)</h2>
<p>This section emphasizes key prototyping principles outlined in the exercise brief:</p>
<ol type="1">
<li><p><strong>Evaluation of R Packages from CRAN</strong>: The prototype uses CRAN-supported packages such as <code>shiny</code>, <code>visNetwork</code>, <code>tidygraph</code>, <code>ggraph</code>, <code>igraph</code>, <code>jsonlite</code>, <code>dplyr</code>, and <code>DT</code>, all verified as stable and production-ready. This ensures compatibility and reduces technical risk when scaling the full Shiny application.</p></li>
<li><p><strong>Validation of Functional Code</strong>: All prototype components will be individually tested using RStudio. The pre-processing logic and community detection methods seek to ensure that it return correct outputs, and the visual network plot reacts dynamically to filtered inputs. Each Shiny UI input will be tied to a reactive server-side operation, tested both in isolation and in the Shiny runtime environment.</p></li>
<li><p><strong>Definition of Inputs and Outputs</strong>: Inputs include dropdowns for algorithm selection, checkboxes for entity filtering, and sliders for edge weight thresholds. Outputs include an interactive <code>visNetwork</code> graph, node information text display, and (optionally) an exportable snapshot. This alignment ensures clarity for both developers and users.</p></li>
<li><p><strong>Shiny UI Component Selection</strong>: Interface components are chosen to balance functionality and user experience:</p>
<ul>
<li><p><code>selectInput()</code> offers a clear choice between Louvain and Walktrap algorithms.</p></li>
<li><p><code>checkboxGroupInput()</code> allows entity-specific filtering for targeted analysis.</p></li>
<li><p><code>sliderInput()</code> provides intuitive numeric filtering for graph density.</p></li>
<li><p><code>visNetworkOutput()</code> renders an interactive and scalable network layout.</p></li>
<li><p><code>verbatimTextOutput()</code> reveals node metadata for contextual interpretation.</p></li>
</ul></li>
</ol>
<p>These choices follow principles showcased in leading prototypes (e.g., Decoding Chaos and Tanzania Tourism), focusing on minimal cognitive load, fast responsiveness, and user-guided discovery.</p>
<p>To ensure clarity and usability, this module is designed using a storyboard-driven approach, inspired by best practices observed in exemplary prototype pages such as those from <em>Decoding Chaos</em> and <em>Tanzania Tourism Analysis</em>.</p>
<section id="prototyping-strategy" class="level3">
<h3 class="anchored" data-anchor-id="prototyping-strategy">Prototyping Strategy</h3>
<p>Drawing inspiration from these references:</p>
<ul>
<li>Use <strong>incremental prototyping</strong>: starting with static exploration, then layering interactivity.</li>
<li>Implement <strong>modular design</strong>: develop this as one self-contained component for integration into the larger app.</li>
<li>Include <strong>user-centered workflows</strong>: filters and actions modeled after investigative tasks (e.g., discovering who communicates frequently, identifying aliases).</li>
</ul>
</section>
<section id="storyboarding-process" class="level3">
<h3 class="anchored" data-anchor-id="storyboarding-process">Storyboarding Process</h3>
<ol type="1">
<li><strong>Define User Goals</strong>: Support Clepper in uncovering clustered interactions and pseudonym aliases.</li>
<li><strong>Storyboard Sketching</strong>: Initial wireframes were drafted to conceptualize component layout — influenced by those in the Decoding Chaos storyboard page.</li>
<li><strong>Component-Task Mapping</strong>: Every UI widget was explicitly mapped to a backend logic, ensuring traceability and transparency.</li>
</ol>
</section>
<section id="main-landing-page-mock-ups-and-dashboard-style" class="level3">
<h3 class="anchored" data-anchor-id="main-landing-page-mock-ups-and-dashboard-style">Main Landing Page Mock-ups and Dashboard Style</h3>
<p>To inform the visual language and layout of the Shiny application, our team designed a prototype landing page comprising several interlinked interface sections. These visuals illustrate the envisioned user interface and serve as references for component development.</p>
<section id="landing-cover-page-team-identity" class="level4">
<h4 class="anchored" data-anchor-id="landing-cover-page-team-identity">1. <strong>Landing Cover Page (Team Identity)</strong></h4>
<p>This mock-up establishes the visual identity and thematic branding for the dashboard. It reflects both the investigative tone of the VAST Challenge and our team’s creative approach. It includes a left navigation menu that guides users to each of the core question modules (Q1 to Q4), providing a consistent sidebar layout throughout the app.</p>
<p><img src="pictures/1.png" class="img-fluid"></p>
<p><img src="pictures/2.png" class="img-fluid"></p>
</section>
<section id="daily-radio-communication-volume-q1a-q1b" class="level4">
<h4 class="anchored" data-anchor-id="daily-radio-communication-volume-q1a-q1b">2. <strong>Daily Radio Communication Volume (Q1A &amp; Q1B)</strong></h4>
<p>This section visualizes message frequency over time to detect periodicity or anomalies. It includes:</p>
<ul>
<li>A dynamic bar chart summarizing total and average daily volume.</li>
<li>Interactive dropdown and hover tooltips for contextual exploration.</li>
</ul>
<p><em>This template serves as a reference for time-series visualizations to be integrated in future timeline-driven modules of the application.</em></p>
<p><img src="pictures/3.png" class="img-fluid"></p>
</section>
<section id="entity-network-focus-view-nadia-conti-q1c" class="level4">
<h4 class="anchored" data-anchor-id="entity-network-focus-view-nadia-conti-q1c">3. <strong>Entity Network Focus View – “Nadia Conti” (Q1C)</strong></h4>
<p>This visual emphasizes network centrality and ego relationships. It includes:</p>
<ul>
<li>Shapes and colors to differentiate entity types (e.g., vessel, organization, person).</li>
<li>A drop-down filter to focus on individual entities.</li>
</ul>
<p><em>This model informed the modular network layout used in our prototype for community and pseudonym analysis.</em></p>
<p><img src="pictures/4.png" class="img-fluid"></p>
</section>
<section id="storyboard-sketch-module-wireframe" class="level4">
<h4 class="anchored" data-anchor-id="storyboard-sketch-module-wireframe">4. <strong>Storyboard Sketch (Module Wireframe)</strong></h4>
<p>This low-fidelity layout demonstrates the foundational module structure:</p>
<ul>
<li>Left panel: Parameter controls</li>
<li>Right panel: Interactive graph and metadata display</li>
</ul>
<p>It serves as the core layout pattern for the Shiny UI development, supporting Louvain/Walktrap switching, entity filters, and network interactivity.</p>
<p><img src="images/clipboard-1365057945.png" class="img-fluid"></p>
</section>
</section>
<section id="planned-layout" class="level3">
<h3 class="anchored" data-anchor-id="planned-layout">Planned Layout</h3>
<p>The storyboard sketch and mock-ups reinforce a consistent modular layout adopted across the Shiny application. Each view uses a <strong>sidebar-main panel split</strong>, empowering users to choose algorithm types and entity filters on the left and observe dynamic network results on the right.</p>
<ul>
<li><strong>Sidebar</strong>: Control panel for selecting algorithm type, filtering entity type, and edge weight.</li>
<li><strong>Main Panel</strong>: Interactive network with dynamic tooltips, zoom/pan, and metadata inspection.</li>
<li><strong>Tabbed Interface</strong> <em>(optional)</em>: To toggle between community detection algorithms or show temporal comparisons.</li>
<li><strong>Export &amp; Snapshot Option</strong>: Allow user to capture the view for reporting.</li>
</ul>
<section id="example-ui-layout" class="level4">
<h4 class="anchored" data-anchor-id="example-ui-layout">Example UI Layout</h4>
<p>Below is a simplified Shiny layout using <code>fluidPage()</code> to map this structure:</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">#|code-fold: False</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">titlePanel</span>(<span class="st">"Community Detection &amp; Pseudonym Explorer"</span>),</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sidebarLayout</span>(</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sidebarPanel</span>(</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">selectInput</span>(<span class="st">"algo"</span>, <span class="st">"Community Detection Algorithm"</span>, <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">"Louvain"</span>, <span class="st">"Walktrap"</span>)),</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>      <span class="fu">checkboxGroupInput</span>(<span class="st">"type"</span>, <span class="st">"Entity Types"</span>, <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">"Person"</span>, <span class="st">"Vessel"</span>, <span class="st">"Place"</span>)),</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>      <span class="fu">sliderInput</span>(<span class="st">"weight"</span>, <span class="st">"Minimum Edge Weight"</span>, <span class="at">min =</span> <span class="dv">1</span>, <span class="at">max =</span> <span class="dv">10</span>, <span class="at">value =</span> <span class="dv">2</span>)</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mainPanel</span>(</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>      <span class="fu">visNetworkOutput</span>(<span class="st">"net"</span>, <span class="at">height =</span> <span class="st">"600px"</span>),</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>      <span class="fu">verbatimTextOutput</span>(<span class="st">"info"</span>)</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>This structure ensures responsiveness, clarity, and user engagement. The design accommodates future expansion while maintaining a low learning curve. Screenshots from earlier dashboard questions, such as the bar chart in Q1A&amp;B and the entity-focused network of Q1C, served as design blueprints to guide the final implementation.</p>
</section>
</section>
<section id="ui-component-mapping" class="level3">
<h3 class="anchored" data-anchor-id="ui-component-mapping">UI Component Mapping</h3>
<p>In addition to interactive graph exploration, this Shiny application supports tabulated results presented using the <code>DT</code> package. This enhances user control and discoverability when inspecting detailed data outputs such as entity centrality, community membership, or alias metadata.</p>
</section>
<section id="interactive-tabulated-results" class="level3">
<h3 class="anchored" data-anchor-id="interactive-tabulated-results">Interactive Tabulated Results</h3>
<p>Using <code>DT::datatable()</code>, users can:</p>
<ul>
<li>🔍 Search and filter across any column</li>
<li>🔼🔽 Sort by degree, cluster ID, type, or other attributes</li>
<li>🎯 Focus on specific entities or pseudonyms from the wider graph output</li>
</ul>
<section id="example-ui-integration" class="level4">
<h4 class="anchored" data-anchor-id="example-ui-integration">Example UI Integration</h4>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mainPanel</span>(</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">DTOutput</span>(<span class="st">"result_table"</span>)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="server-logic-example" class="level4">
<h4 class="anchored" data-anchor-id="server-logic-example">Server Logic Example</h4>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>output<span class="sc">$</span>result_table <span class="ot">&lt;-</span> <span class="fu">renderDT</span>({</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(df_results,</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">pageLength =</span> <span class="dv">10</span>,</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>              <span class="at">autoWidth =</span> <span class="cn">TRUE</span>,</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>              <span class="at">searchHighlight =</span> <span class="cn">TRUE</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>            ),</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">rownames =</span> <span class="cn">FALSE</span>,</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">filter =</span> <span class="st">"top"</span>,</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">class =</span> <span class="st">'stripe hover compact'</span>)</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>This supports investigation workflows such as:</p>
<ul>
<li>Listing top communicators by degree centrality</li>
<li>Exploring all known aliases and pseudonyms</li>
<li>Displaying communication volume by entity pairs</li>
</ul>
<p>By embedding this alongside the network graph, the application delivers both <strong>relational context</strong> and <strong>tabulated drilldown</strong> capabilities, bridging visual insight with attribute-level data access.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 47%">
<col style="width: 52%">
</colgroup>
<thead>
<tr class="header">
<th>UI Component</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>selectInput("algo")</code></td>
<td>Choose detection algorithm (Louvain/Walktrap)</td>
</tr>
<tr class="even">
<td><code>checkboxGroupInput("type")</code></td>
<td>Filter node types (person, vessel, place)</td>
</tr>
<tr class="odd">
<td><code>sliderInput("weight")</code></td>
<td>Filter connections below weight threshold</td>
</tr>
<tr class="even">
<td><code>visNetworkOutput("net")</code></td>
<td>Display interactive graph</td>
</tr>
<tr class="odd">
<td><code>verbatimTextOutput("info")</code></td>
<td>Node metadata panel</td>
</tr>
</tbody>
</table>
<p><strong>Design Learnings from References</strong></p>
<ul>
<li><strong>Tanzania Tourism</strong> emphasized clarity in visual transitions and guided storytelling.</li>
<li><strong>Decoding Chaos</strong> used a modular dashboard and strong use of aspatial/geospatial splits — we aim to mirror this by making this module fully pluggable.</li>
<li><strong>Confirmatory Analysis</strong> example showed the benefit of toggling between analytical models — we aim to adopt this in Louvain vs.&nbsp;Walktrap switch.</li>
</ul>
</section>
</section>
</section>
<section id="parameters-and-outputs" class="level2">
<h2 class="anchored" data-anchor-id="parameters-and-outputs">5. Parameters and Outputs</h2>
<p>To make the Shiny application more engaging and insightful, we expand beyond core filters and outputs to include a wider array of interactive features.</p>
<section id="user-inputs" class="level3">
<h3 class="anchored" data-anchor-id="user-inputs">User Inputs:</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 47%">
<col style="width: 52%">
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Input Control</strong></td>
<td><strong>Description</strong></td>
</tr>
<tr class="even">
<td><code>selectInput("algo")</code></td>
<td>Community detection method selector (Louvain or Walktrap)</td>
</tr>
<tr class="odd">
<td><code>checkboxGroupInput("type")</code></td>
<td>Entity type filter (Person, Vessel, Place)</td>
</tr>
<tr class="even">
<td><code>sliderInput("weight")</code></td>
<td>Minimum edge weight threshold to reduce noise</td>
</tr>
<tr class="odd">
<td><code>selectInput("focus_entity")</code></td>
<td>Focus on a particular entity (e.g., Nadia Conti) to show ego network</td>
</tr>
<tr class="even">
<td><code>checkboxInput("highlight_alias")</code></td>
<td>Toggle to highlight entities suspected of pseudonym usage</td>
</tr>
<tr class="odd">
<td><code>dateRangeInput("comm_range")</code></td>
<td>Select time window to filter communication edges</td>
</tr>
<tr class="even">
<td><code>selectInput("cluster_id")</code></td>
<td>Filter or highlight a specific cluster based on detection algorithm</td>
</tr>
</tbody>
</table>
</section>
<section id="application-outputs" class="level3">
<h3 class="anchored" data-anchor-id="application-outputs">Application Outputs:</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 45%">
<col style="width: 54%">
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Output Component</strong></td>
<td><strong>Description</strong></td>
</tr>
<tr class="even">
<td><code>visNetworkOutput("net")</code></td>
<td>Interactive network showing colored clusters and filtered edges</td>
</tr>
<tr class="odd">
<td><code>verbatimTextOutput("info")</code></td>
<td>Metadata of selected node (e.g., name, type, degree)</td>
</tr>
<tr class="even">
<td><code>plotOutput("timeline_plot")</code></td>
<td>Communication volume over time (to be integrated)</td>
</tr>
<tr class="odd">
<td><code>DTOutput("result_table")</code></td>
<td>Tabular view of nodes or edges with filtering and sorting features</td>
</tr>
<tr class="even">
<td><code>downloadButton("export_plot")</code></td>
<td>Export current network view as image or snapshot</td>
</tr>
<tr class="odd">
<td><code>textOutput("cluster_summary")</code></td>
<td>Summary statistics for selected community cluster</td>
</tr>
</tbody>
</table>
</section>
<section id="interactivity-expansion-ideas" class="level3">
<h3 class="anchored" data-anchor-id="interactivity-expansion-ideas">Interactivity Expansion Ideas:</h3>
<ul>
<li><strong>Drill-down via double-click</strong>: Expand a node to show direct neighbors</li>
<li><strong>Brushing and linking</strong>: Select nodes from network to highlight rows in table</li>
<li><strong>Dynamic color mapping</strong>: Toggle between cluster ID, entity type, or degree centrality as node color basis</li>
<li><strong>Topic integration</strong>: Add top-communicated keywords per cluster in hover tooltip or side display</li>
<li><strong>Alias grouping</strong>: Visually link nodes suspected to share the same pseudonym</li>
</ul>
<p>These enhancements not only add usability and depth, but also align tightly with the investigative workflow Clepper is likely to pursue — identifying leads, tracking influence, and exposing deceptive practices over time.</p>
</section>
<section id="user-inputs-1" class="level3">
<h3 class="anchored" data-anchor-id="user-inputs-1">User Inputs:</h3>
<ul>
<li>Community detection algorithm</li>
<li>Entity type filter</li>
<li>Weight threshold</li>
</ul>
</section>
<section id="application-outputs-1" class="level3">
<h3 class="anchored" data-anchor-id="application-outputs-1">Application Outputs:</h3>
<ul>
<li>Network plot (interactive, color-coded clusters)</li>
<li>Node metadata when clicked</li>
<li>Exportable graph snapshot (optional)</li>
</ul>
</section>
</section>
<section id="prototype-code-snippets" class="level2">
<h2 class="anchored" data-anchor-id="prototype-code-snippets">6. Prototype Code Snippets</h2>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Community Detection</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>graph_louvain <span class="ot">&lt;-</span> graph_data <span class="sc">%&gt;%</span> </span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">community =</span> <span class="fu">group_louvain</span>())</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Interactive Plot</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>output<span class="sc">$</span>net <span class="ot">&lt;-</span> <span class="fu">renderVisNetwork</span>({</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  filtered <span class="ot">&lt;-</span> graph_louvain <span class="sc">%&gt;%</span> <span class="fu">activate</span>(edges) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(weight <span class="sc">&gt;=</span> input<span class="sc">$</span>weight)</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">visNetwork</span>(filtered)</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="reflections-and-next-steps" class="level2">
<h2 class="anchored" data-anchor-id="reflections-and-next-steps">7. Reflections and Next Steps</h2>
<p>This Take-home 3 prototype marks a successful first implementation of a modular Shiny component tailored for investigative visual analytics. It showcases the power of combining community detection algorithms, interactive network diagrams, and dynamic filtering interfaces to surface hidden communication patterns and pseudonym dynamics in a complex dataset.</p>
<p>Key strengths of this prototype include:</p>
<ul>
<li>A tested and extensible data pipeline for converting JSON-based knowledge graphs into tidygraph objects</li>
<li>Well-integrated community detection logic (Louvain and Walktrap)</li>
<li>A modular and visually consistent user interface grounded in investigative needs</li>
<li>Effective alignment between network visualisation and tabular insight via linked interactivity</li>
</ul>
<p>This prototype also reflects lessons learned from top-performing prior projects (e.g., Decoding Chaos, Tanzania Tourism) in terms of storyboarding, modular UI planning, and interaction design.</p>
<section id="proposed-next-steps" class="level3">
<h3 class="anchored" data-anchor-id="proposed-next-steps">Proposed Next Steps</h3>
<p>To scale this prototype into a full-featured module within the final application, the following development goals are recommended:</p>
<ul>
<li><strong>Integrate Timeline Filtering</strong>: Allow communication edges to be filtered by date range using <code>dateRangeInput()</code>.</li>
<li><strong>Implement Pseudonym Disambiguation</strong>: Build logic to identify and visually cluster suspected pseudonym aliases across multiple entities.</li>
<li><strong>Topic Enrichment</strong>: Associate dominant message themes with detected communities using keyword extraction or topic modeling.</li>
<li><strong>Brushing &amp; Linking</strong>: Enable node selections in the network to highlight related records in the tabular view, enhancing discoverability.</li>
<li><strong>Geospatial Integration</strong>: Add optional map-based view to connect network dynamics to spatial context (if vessel coordinates or harbor data is available).</li>
<li><strong>Scenario Testing</strong>: Validate with real investigative use cases by simulating Clepper Jessen’s workflow end-to-end.</li>
</ul>
<p>With these enhancements, the application can evolve into a powerful and intuitive investigative platform — revealing who is connected, how they communicate, and which identities may be intentionally obscured.</p>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>